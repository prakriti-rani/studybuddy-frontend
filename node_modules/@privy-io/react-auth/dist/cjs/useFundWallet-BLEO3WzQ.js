"use strict";var e=require("react"),a=require("./useWallets-Dmyb5a0t.js"),n=require("./prepareFundingModalData-BCNQSbXb.js"),t=require("@solana/web3.js"),r=require("@privy-io/js-sdk-core"),s=require("./internal-context-DV3MljLU.js"),o={id:n.SOLANA_FUNDING_PLUGIN_ID,getBalance:({address:e,cluster:a})=>new t.Connection(r.getSolanaRpcEndpointForCluster(a)).getBalance(new t.PublicKey(e)),createTransferTransaction:async({from:e,to:a,amount:n,cluster:s})=>{let o=new t.PublicKey(e),i=new t.Transaction;i.add(t.SystemProgram.transfer({fromPubkey:o,toPubkey:new t.PublicKey(a),lamports:n}));let l=new t.Connection(r.getSolanaRpcEndpointForCluster(s)),c=await l.getLatestBlockhash();return i.recentBlockhash=c.blockhash,i.feePayer=o,{transaction:i,connection:l}},createBridgeTransactionFromRelayQuote:async({quote:e,from:a,cluster:n})=>{let s=e.steps[0]?.items?.[0];if(!s)return;let o=s.data.instructions.map((({keys:e,programId:a,data:n})=>new t.TransactionInstruction({keys:e.map((({pubkey:e,isSigner:a,isWritable:n})=>({pubkey:new t.PublicKey(e),isSigner:a,isWritable:n}))),programId:new t.PublicKey(a),data:Buffer.from(n,"hex")}))),i=s.data.addressLookupTableAddresses?.map((e=>new t.PublicKey(e))),l=new t.Connection(r.getSolanaRpcEndpointForCluster(n)),c=await Promise.all((i??[]).map((async e=>l.getAddressLookupTable(e).then((e=>e.value))))),{blockhash:u}=await l.getLatestBlockhash();return{transaction:new t.VersionedTransaction(new t.TransactionMessage({payerKey:new t.PublicKey(a),instructions:o,recentBlockhash:u}).compileToV0Message(c)),connection:l}}};exports.t=o,exports.useFundWallet=t=>{n.usePrivyEventSubscription("fundSolanaWallet",t);let r=a.useAppConfig(),{setModalData:i}=a.usePrivyModal(),{openModal:l}=s.usePrivyInternal();return n.useRegisterPlugin(o),{fundWallet:e.useCallback((async(e,t)=>{let s=a.ModalScreen.FUNDING_METHOD_SELECTION_SCREEN;i({funding:n.prepareSolanaFundingModalData({address:e,appConfig:r,fundWalletConfig:t,methodScreen:s})}),l(s)}),[r,i,l])}};
